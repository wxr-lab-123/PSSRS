<!--pages/inquiry/inquiry.wxml-->
<navigation-bar title="æˆ‘çš„æŒ‚å·" back="{{true}}" color="white" background="#a8edea"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">

    <!-- æŒ‚å·è®°å½• -->
    <view class="content-section">
      <!-- å¾…å°±è¯Šè®°å½• -->
      <view class="category-section" wx:if="{{pendingRecords.length > 0}}">
        <view class="category-title">å¾…å°±è¯Šè®°å½•</view>
        <view class="record-list">
          <view class="record-item" wx:for="{{pendingRecords}}" wx:key="id">
            <view class="record-header">
              <text class="record-title">{{item.department}} - {{item.doctor}}</text>
              <text class="record-status pending">{{item.statusText}}</text>
            </view>
      <view class="record-info">
        <text class="info-item">å°±è¯Šäººï¼š{{item.patientName}}</text>
        <text class="info-item">å°±è¯Šæ—¶é—´ï¼š{{item.time}}</text>
        <text class="info-item">æŒ‚å·è´¹ï¼šÂ¥{{item.fee}}</text>
        <text class="info-item">å°±è¯Šå·ï¼š{{item.number}}</text>
      </view>
            <view class="record-actions">
              <button class="action-btn cancel-btn" bindtap="cancelAppointment" data-id="{{item.id}}">å–æ¶ˆ</button>
              <button class="action-btn detail-btn" bindtap="viewDetails" data-id="{{item.id}}">æŸ¥çœ‹è¯¦æƒ…</button>
            </view>
          </view>
        </view>
      </view>
      
      <!-- å·²å°±è¯Šè®°å½• -->
      <view class="category-section" wx:if="{{completedRecords.length > 0}}">
        <view class="category-title">å·²å°±è¯Šè®°å½•</view>
        <view class="record-list">
          <view class="record-item" wx:for="{{completedRecords}}" wx:key="id">
            <view class="record-header">
              <text class="record-title">{{item.department}} - {{item.doctor}}</text>
              <text class="record-status completed">{{item.statusText}}</text>
            </view>
      <view class="record-info">
        <text class="info-item">å°±è¯Šäººï¼š{{item.patientName}}</text>
        <text class="info-item">å°±è¯Šæ—¶é—´ï¼š{{item.time}}</text>
        <text class="info-item">æŒ‚å·è´¹ï¼šÂ¥{{item.fee}}</text>
        <text class="info-item">å°±è¯Šå·ï¼š{{item.number}}</text>
      </view>
            <view class="record-actions">
              <button class="action-btn detail-btn full-width" bindtap="viewDetails" data-id="{{item.id}}">æŸ¥çœ‹è¯¦æƒ…</button>
            </view>
          </view>
        </view>
      </view>
      
      <!-- å·²å–æ¶ˆè®°å½• -->
      <view class="category-section" wx:if="{{cancelledRecords.length > 0}}">
        <view class="category-title">å·²å–æ¶ˆè®°å½•</view>
        <view class="record-list">
          <view class="record-item" wx:for="{{cancelledRecords}}" wx:key="id">
            <view class="record-header">
              <text class="record-title">{{item.department}} - {{item.doctor}}</text>
              <text class="record-status cancelled">{{item.statusText}}</text>
            </view>
      <view class="record-info">
        <text class="info-item">å°±è¯Šäººï¼š{{item.patientName}}</text>
        <text class="info-item">å°±è¯Šæ—¶é—´ï¼š{{item.time}}</text>
        <text class="info-item">æŒ‚å·è´¹ï¼šÂ¥{{item.fee}}</text>
        <text class="info-item">å°±è¯Šå·ï¼š{{item.number}}</text>
      </view>
            <view class="record-actions">
              <button class="action-btn detail-btn full-width" bindtap="viewDetails" data-id="{{item.id}}">æŸ¥çœ‹è¯¦æƒ…</button>
            </view>
          </view>
        </view>
      </view>
      
      <!-- ç©ºçŠ¶æ€æç¤º -->
      <view class="empty-state" wx:if="{{pendingRecords.length === 0 && completedRecords.length === 0 && cancelledRecords.length === 0}}">
        <text class="empty-icon">ğŸ“‹</text>
        <text class="empty-text">æš‚æ— æŒ‚å·è®°å½•</text>
        <button class="go-register-btn" bindtap="navigateToRegister">å»æŒ‚å·</button>
      </view>
    </view>
  </view>
</scroll-view>
