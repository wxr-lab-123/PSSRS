<!--pages/take-number/take-number.wxml-->
<navigation-bar title="é¢„çº¦å–å·" back="{{true}}" color="white" background="#1e90ff"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">

    <view class="loading-state" wx:if="{{loading}}">
      <text class="loading-text">æŸ¥è¯¢ä¸­...</text>
    </view>

    <view class="appointment-list" wx:if="{{appointments.length > 0}}">
      <view class="appointment-item" wx:for="{{appointments}}" wx:key="registrationNo">
        <view class="item-header">
          <text class="order-no">é¢„çº¦å•å·ï¼š{{item.orderNo}}</text>
          <text class="status {{item.status}}">{{item.statusText}}</text>
        </view>
        <view class="item-info">
          <view class="info-row">
            <text class="label">æ‚£è€…å§“åï¼š</text>
            <text class="value">{{item.patientName}}</text>
          </view>
          <view class="info-row">
            <text class="label">å°±è¯Šç§‘å®¤ï¼š</text>
            <text class="value">{{item.department}}</text>
          </view>
          <view class="info-row">
            <text class="label">å°±è¯ŠåŒ»ç”Ÿï¼š</text>
            <text class="value">{{item.doctorName}}</text>
          </view>
          <view class="info-row">
            <text class="label">å°±è¯Šæ—¶é—´ï¼š</text>
            <text class="value">{{item.appointmentTime}}</text>
          </view>
        </view>
        <button class="take-btn" wx:if="{{item.status === 'paid'}}" bindtap="takeNumber" data-item="{{item}}">
          ç«‹å³å–å·
        </button>
      </view>
    </view>

    <view class="empty-state" wx:else>
      <text class="empty-icon">ğŸ“‹</text>
      <text class="empty-text">æš‚æ— é¢„çº¦è®°å½•</text>
    </view>
  </view>
</scroll-view>
